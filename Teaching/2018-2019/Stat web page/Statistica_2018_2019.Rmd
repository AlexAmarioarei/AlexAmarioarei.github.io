---
title: ""
author: ""
date: ""
output:
  html_document:
    css: css/styles.css
    fig_caption: yes
    toc: yes
    toc_float:
      collapsed: no
    includes:
      in_header: header/Stat_header.html
      after_body: footer/include_footer.html
  pdf_document:
    keep_tex: yes
    toc: yes
    toc_depth: 3
---

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 155
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<script type="text/javascript">
	$(document).ready(function(){
		$("#myModal").modal('show');
	});
</script>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r echo=FALSE, include=FALSE}
library(knitr)
library(kableExtra)
library(DT)
library(tidyverse)
```

## Informații generale
***

Acest curs reprezintă o introducere în statistica matematică.  

```{r, fig.align='center', out.width="80%", echo=FALSE}
knitr::include_graphics("images/data-by-the-numbers.png")
```

## Informații de contact 
***

### Curs 

 *  _Instructor_ : [Alexandru Amărioarei](https://alexamarioarei.github.io/)

 *  _Email_ : alexandru [dot] amarioarei [at] fmi [dot] unibuc [dot] ro

 *  _Orar_ : Vineri 16:00 - 18:00

 *  _Sala_ : Amfiteatrul Stoilow (Etaj 1) - Grupele 301, 311, 321


### Seminar/Laborator

 *  _Instructori_ : [Alexandru Amărioarei](https://alexamarioarei.github.io/) și Simona Cojocea

 *  _Email_ : alexandru [dot] amarioarei [at] fmi [dot] unibuc [dot] ro
 
## Note de laborator 
***

Mai jos găsiți o parte din laboratoarele cursului. 


```{r echo = FALSE}
# lab1 = "[HTML](labs/Lab1.html)"
# pdf_lab1 = "[PDF](labs/Lab1.pdf)"
# 
# lab2 = "[HTML](labs/Lab2.html)"
# pdf_lab2 = "[PDF](labs/Lab2.pdf)"
# 
# lab3 = "[HTML](labs/Lab3.html)"
# pdf_lab3 = "[PDF](labs/Lab3.pdf)"
# 
# lab4 = "[HTML](labs/Lab4.html)"
# pdf_lab4 = "[PDF](labs/Lab4.pdf)"
# 
# lab5 = "[HTML](labs/Lab5.html)"
# pdf_lab5 = "[PDF](labs/Lab5.pdf)"
# 
# lab6 = "[HTML](labs/Lab6.html)"
# pdf_lab6 = "[PDF](labs/Lab6.pdf)"

lab1 = "[HTML]()"
pdf_lab1 = "[PDF]()"

lab2 = "[HTML]()"
pdf_lab2 = "[PDF]()"

lab3 = "[HTML]()"
pdf_lab3 = "[PDF]()"

lab4 = "[HTML]()"
pdf_lab4 = "[PDF]()"

lab5 = "[HTML]()"
pdf_lab5 = "[PDF]()"

lab6 = "[HTML]()"
pdf_lab6 = "[PDF]()"
# 
# lab7 = "[HTML](labs/Lab_7.html)"
# pdf_lab7 = "[PDF](labs/Lab_7.pdf)"
# 
# lab_sup = "[HTML](labs/Lab_Suplimentar_IPS.html)"
# pdf_lab_sup = "[PDF](labs/Lab_Suplimentar_IPS.pdf)"

tabLab = data.frame(Nr = c(1,
                           2,
                           3,
                           4,
                           5,
                           6#, 
                           # 7, 
                           # 8
                           ),
                    Lab = c("Laborator 1", 
                            "Laborator 2",
                            "Laborator 3",
                            "Laborator 4",
                            "Laborator 5",
                            "Laborator 6"#,
                            # "Laborator 7", 
                            # "Laborator Suplimentar"
                            ),
                    Htmls = c(lab1, 
                              lab2,
                              lab3,
                              lab4,
                              lab5,
                              lab6#,
                              # lab7, 
                              # lab_sup
                              ),
                    Pdfs = c(pdf_lab1, 
                             pdf_lab2,
                             pdf_lab3,
                             pdf_lab4,
                             pdf_lab5,
                             pdf_lab6#,
                             # pdf_lab7, 
                             # pdf_lab_sup
                             ))


kableExtra::kable(tabLab, 
      col.names = c("Nr", "Laborator", "HTML", "PDFs"),
      align = "cccc", 
      booktabs = TRUE) %>% 
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

## Notarea
***

Notarea se va face după cum urmează: teme (30%) distribuite în mod egal, ~~proiect de laborator (20%)~~ și examen final (70%). Bonus aveți și $1$ punct din oficiu:

<!-- $$ -->
<!--   T = \min\left(1+0.5\times E + 0.2\times P + 0.06\times\sum_{i=1}^{5}T_i, 10\right) -->
<!-- $$ -->


$$
  T = \min\left(1+0.7\times E + 0.06\times\sum_{i=1}^{5}T_i, 10\right)
$$

## Teme
***

Vor fi 5 teme și acestea vor fi postate (aproape) din două în două săptămâni (de obicei Duminică seara). Este încurajată colaborarea între studenți dar fiecare student trebuie să își scrie propriile soluții. Copierea temei este __interzisă__.

```{r echo = FALSE}
# t1 = "[Tema 1](homework/Tema1.pdf)"
# t1sol = "[Solutie](homework/Tema1_Sol.pdf)"
# t1data = "28 Octombrie"
# 
# t2 = "[Tema 2](homework/Tema2.pdf)"
# t2sol = "[Solutie](homework/Tema2_Sol.pdf)"
# t2data = "~~11 Noiembrie~~18 Noiembrie"
# 
# t3 = "[Tema 3](homework/Tema3.pdf)"
# t3sol = "[Solutie](homework/Tema3_Sol.pdf)"
# t3data = "~~2 Decembrie~~ 8 Decembrie"
# 
# t4 = "[Tema 4](homework/Tema4.pdf)"
# t4sol = "[Solutie](homework/Tema4_Sol.pdf)"
# t4data = "29 Decembrie"
# 
# t5 = "[Tema 5](homework/Tema5.pdf)"
# t5sol = "[Solutie](homework/Tema5_Sol.pdf)"
# t5data = "25 Ianuarie"

t1 = "[Tema 1]()"
t1sol = "[Solutie]()"
t1data = "28 Octombrie"

t2 = "[Tema 2]()"
t2sol = "[Solutie]()"
t2data = "~~11 Noiembrie~~18 Noiembrie"

t3 = "[Tema 3]()"
t3sol = "[Solutie]()"
t3data = "~~2 Decembrie~~ 8 Decembrie"

t4 = "[Tema 4]()"
t4sol = "[Solutie]()"
t4data = "29 Decembrie"

t5 = "[Tema 5]()"
t5sol = "[Solutie]()"
t5data = "25 Ianuarie"

# t6 = "~~Tema 6~~"
# t6sol = "~~Solutie Tema 6~~"
# t6data = "--"

tab = data.frame(Tema = c(t1, 
                          t2, 
                          t3, 
                          t4, 
                          t5), 
                 Data = c(t1data, 
                          t2data, 
                          t3data,
                          t4data, 
                          t5data), 
                 Solution = c(t1sol, 
                              t2sol, 
                              t3sol, 
                              t4sol, 
                              t5sol))

# tab = data.frame(Tema = c(t1, t2, t3, t4, t5, t6), 
#                  Data = c(t1data, t2data, t3data, t4data, t5data, t6data), 
#                  Solution = c(t1sol, t2sol, t3sol, t4sol, t5sol, t6sol))

kableExtra::kable(tab, 
      col.names = c("Tema", "Data de predare", "Solutii"),
      align = "ccc") %>% 
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```
  
Trimiterea temelor se poate face pe adresa de **Dropbox** (conform instrucțiunilor de la curs) până la *data de predare* din tabel, cel târziu până la ora 23:59. 

Studenții trebuie să trimită temele în folderele cu grupele corespunzătoare. Fiecare temă va fi trimisă în format **PDF** (lizibil) iar fișierul va avea numele: *Tema_x_Nume_Prenume_grupa_y.pdf*, unde *x* este numărul temei iar *y* este numărul grupei. 

```{block, type = 'rmdcaution'}
În cazul în care o temă nu va fi predată la timp, nu va avea formatul specificat sau nu va fi lizibilă, aceasta va fi punctată cu 0 puncte.  
```

> **TABELE STATISTICE** Vizualizați versiunea [HTML](tables/Tabele_Statistice.html) sau [PDF](tables/Tabele_Statistice_v2_stat.pdf).

## Proiect de laborator
***

```{block, type = 'rmdcaution'}
Anul acesta **proiectul de laborator** valorează 1.5p și este bonus! Punctajul acestuia se adaugă la nota de la examen calculată mai sus.  
```

Mai jos găsiți proiectele de laborator pentru cursul de *Statistică*. Proiectele sunt individuale iar copierea proiectelor este __strict interzisă__.

```{r echo = FALSE}
gproj1_301 = "301"
proj1_301 = "[HTML](projects/Proiect_301.html) / [PDF](projects/Proiect_301.pdf)"
bproj1_301 = ""
proj1data_301 = "30 Ianuarie"

gproj1_311_321 = "311, 321"
proj1_311_321 = "[HTML](projects/Proiect_311_321.html) / [PDF](projects/Proiect_311_321.pdf)"
bproj1_311_321 = ""
proj1data_311_321 = ""


tabProiecte = data.frame(Tema = c(gproj1_301, gproj1_311_321), 
                         Data = c(proj1_301, proj1_311_321), 
                         Barem = c(bproj1_301, bproj1_311_321),
                         Solution = c(proj1data_301, proj1data_311_321))

kableExtra::kable(tabProiecte, 
      col.names = c("Grupa", "Proiect", "Barem", "Data de predare"),
      align = "cccc") %>% 
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```


Trimiterea proiectelor se va face pe adresa de **Dropbox** (conform instrucțiunilor de la curs) până la *data de predare* din tabel, dar cel târziu până la ora 23:59. 

Studenții trebuie să trimită proiectele în folderele cu grupele corespunzătoare. Fiecare proiect va fi trimis în format **PDF** sau **MSWord** și va fi generat cu ajutorul pachetului [Rmarkdown](http://rmarkdown.rstudio.com/index.html) pentru documente reproductibile. Fișierul final va conține și codul `R` (documentat) și va avea numele: *Proiect_Nume_Prenume_grupa_x.pdf*, unde *x* este numărul grupei. 


## Rezultate Sesiunea Iunie 2019
***

```{r, echo= FALSE, message=FALSE, warning=FALSE}
library(readxl)
stat_tab_E1 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_restanta_Iunie.xlsx")

stat_tab_E1 = stat_tab_E1[,1:10]
stat_tab_E1$Total[stat_tab_E1$Examen == 0] = "Absent"

# tema 1
stat_tab_E1_t1 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_restanta_Iunie.xlsx", 
                                 sheet = 2)

stat_tab_E1_t1[is.na(stat_tab_E1_t1)] = 0

tema1 = paste0(" Ex1 - ", stat_tab_E1_t1$Ex1, "; Ex2 - ", stat_tab_E1_t1$Ex2, 
       "; Ex3 - ", stat_tab_E1_t1$Ex3, "; Ex4 - ", stat_tab_E1_t1$Ex4,
       "; Ex5 - ", stat_tab_E1_t1$Ex5, "; Ex6 - ", stat_tab_E1_t1$Ex6,
       "; Ex7 - ", stat_tab_E1_t1$Ex7, "; Ex8 - ", stat_tab_E1_t1$Ex8,
       "; Ex9 - ", stat_tab_E1_t1$Ex9)

# tema 2
stat_tab_E1_t2 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_restanta_Iunie.xlsx", 
                                 sheet = 3)

stat_tab_E1_t2[is.na(stat_tab_E1_t2)] = 0

tema2 = paste0(" Ex1 - ", stat_tab_E1_t2$Ex1, "; Ex2 - ", stat_tab_E1_t2$Ex2, 
       "; Ex3 - ", stat_tab_E1_t2$Ex3, "; Ex4 - ", stat_tab_E1_t2$Ex4,
       "; Ex5 - ", stat_tab_E1_t2$Ex5, "; Ex6 - ", stat_tab_E1_t2$Ex6)

# tema 3
stat_tab_E1_t3 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_restanta_Iunie.xlsx", 
                                 sheet = 4)

stat_tab_E1_t3[is.na(stat_tab_E1_t3)] = 0

tema3 = paste0(" Ex1 - ", stat_tab_E1_t3$Ex1, "; Ex2 - ", stat_tab_E1_t3$Ex2, 
       "; Ex3 - ", stat_tab_E1_t3$Ex3, "; Ex4 - ", stat_tab_E1_t3$Ex4,
       "; Ex5 - ", stat_tab_E1_t3$Ex5, "; Ex6 - ", stat_tab_E1_t3$Ex6,
       "; Ex7 - ", stat_tab_E1_t3$Ex7)

# tema 4
stat_tab_E1_t4 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_restanta_Iunie.xlsx", 
                                 sheet = 5)

stat_tab_E1_t4[is.na(stat_tab_E1_t4)] = 0

tema4 = paste0(" Ex1 - ", stat_tab_E1_t4$Ex1, "; Ex2 - ", stat_tab_E1_t4$Ex2, 
       "; Ex3 - ", stat_tab_E1_t4$Ex3, "; Ex4 - ", stat_tab_E1_t4$Ex4,
       "; Ex5 - ", stat_tab_E1_t4$Ex5, "; Ex6 - ", stat_tab_E1_t4$Ex6)

# tema 5
stat_tab_E1_t5 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_restanta_Iunie.xlsx", 
                                 sheet = 6)

stat_tab_E1_t5[is.na(stat_tab_E1_t5)] = 0

tema5 = paste0(" Ex1 - ", stat_tab_E1_t5$Ex1, "; Ex2 - ", stat_tab_E1_t5$Ex2, 
       "; Ex3 - ", stat_tab_E1_t5$Ex3, "; Ex4 - ", stat_tab_E1_t5$Ex4,
       "; Ex5 - ", stat_tab_E1_t5$Ex5, "; Ex6 - ", stat_tab_E1_t5$Ex6)

# examen
stat_tab_E1_ex = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_restanta_Iunie.xlsx", 
                                 sheet = 7)

stat_tab_E1_ex[is.na(stat_tab_E1_ex)] = 0

examen = paste0(" Ex1 - ", stat_tab_E1_ex$Ex1, "; Ex2 - ", stat_tab_E1_ex$Ex2, 
       "; Ex3 - ", stat_tab_E1_ex$Ex3, "; Ex4 - ", stat_tab_E1_ex$Ex4)

# 
stat_tab_E1$Tema_1_label = tema1
stat_tab_E1$Tema_2_label = tema2
stat_tab_E1$Tema_3_label = tema3
stat_tab_E1$Tema_4_label = tema4
stat_tab_E1$Tema_5_label = tema5

stat_tab_E1$ex_label = examen

# fix some left 2 columns and right 1 column

DT::datatable(
  cbind(' ' = '', stat_tab_E1), 
  escape = -2,
  class = 'cell-border stripe',
  # style = 'bootstrap',
  extensions = c('FixedColumns', 'Buttons', 'Scroller'),
  options = list(
    columnDefs = list(list(className = 'dt-center', targets = 3:11),
                      list(visible = FALSE, targets = c(0, 12:17)),
                      list(orderable = FALSE, className = 'details-control', targets = 1)),
    dom = c('Bfrtip'),
    scrollX = TRUE,
    # fixedColumns = list(leftColumns = 1, rightColumns = 6),
    buttons = c('csv', 'excel', 'pdf', 'print'),
    initComplete = JS(
    "function(settings, json) {",
    "$(this.api().table().header()).css({'background-color': '#2f7acd', 'color': '#fff'});",
    "}"),
    deferRender = TRUE
  ),
  callback = JS("
  table.column(1).nodes().to$().css({cursor: 'pointer'});
  var format = function(d) {
    return '<div style=\"background-color:#fafafa; padding: .5em; font-size: 0.85em;\"> ' +
            '<u><em style = \"font-size: 1.25em;\">Detalii notare</em></u>: <br> ' + 
           '<strong>Tema 1</strong>:' + d[12] + '<br> ' + 
           '<strong>Tema 2</strong>:' + d[13] + '<br> ' + 
           '<strong>Tema 3</strong>:' + d[14] + '<br> ' + 
           '<strong>Tema 4</strong>:' + d[15] + '<br> ' + 
           '<strong>Tema 5</strong>:' + d[16] + '<br> ' + 
           '<strong>Examen Restanta</strong>:' + d[17] + '</div>';
  };
  table.on('click', 'td.details-control', function() {
    var tr = $(this).closest('tr');
        var row = table.row( tr );
 
        if ( row.child.isShown() ) {
            // This row is already open - close it
            row.child.hide();
            tr.removeClass('shown');
        }
        else {
            // Open this row
            row.child( format(row.data()) ).show();
            tr.addClass('shown');
        }
  });"
  )
)%>% formatStyle('Total', 
                 # backgroundColor = styleInterval(4.9, c('#f78080', '#60cbf2')),
                 backgroundColor = styleEqual(c("Absent", "3", "4", "5", "6", "7", "8", "9", "10"), 
                                              c('#ffff99', '#f78080', '#f78080', '#9ddcff', '#9ddcff', '#9ddcff', '#9ddcff', '#9ddcff', '#9ddcff')),
                 fontWeight = 'bold') %>%
  formatStyle('Total', 
              target = 'row',
                 backgroundColor = styleEqual(c("3", "4", "Absent"), c('#f78080', '#f78080', '#ffff99'))) %>%
  formatStyle(columns = c(3:10), fontSize = '75%')
```

## Rezultate Sesiunea Mai 2019
***

```{r, echo= FALSE, message=FALSE, warning=FALSE}
library(readxl)
stat_tab_E1 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_restanta_Mai.xlsx")

stat_tab_E1 = stat_tab_E1[,1:10]
stat_tab_E1$Total[stat_tab_E1$Examen == 0] = "Absent"

# tema 1
stat_tab_E1_t1 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_restanta_Mai.xlsx", 
                                 sheet = 2)

stat_tab_E1_t1[is.na(stat_tab_E1_t1)] = 0

tema1 = paste0(" Ex1 - ", stat_tab_E1_t1$Ex1, "; Ex2 - ", stat_tab_E1_t1$Ex2, 
       "; Ex3 - ", stat_tab_E1_t1$Ex3, "; Ex4 - ", stat_tab_E1_t1$Ex4,
       "; Ex5 - ", stat_tab_E1_t1$Ex5, "; Ex6 - ", stat_tab_E1_t1$Ex6,
       "; Ex7 - ", stat_tab_E1_t1$Ex7, "; Ex8 - ", stat_tab_E1_t1$Ex8,
       "; Ex9 - ", stat_tab_E1_t1$Ex9)

# tema 2
stat_tab_E1_t2 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_restanta_Mai.xlsx", 
                                 sheet = 3)

stat_tab_E1_t2[is.na(stat_tab_E1_t2)] = 0

tema2 = paste0(" Ex1 - ", stat_tab_E1_t2$Ex1, "; Ex2 - ", stat_tab_E1_t2$Ex2, 
       "; Ex3 - ", stat_tab_E1_t2$Ex3, "; Ex4 - ", stat_tab_E1_t2$Ex4,
       "; Ex5 - ", stat_tab_E1_t2$Ex5, "; Ex6 - ", stat_tab_E1_t2$Ex6)

# tema 3
stat_tab_E1_t3 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_restanta_Mai.xlsx", 
                                 sheet = 4)

stat_tab_E1_t3[is.na(stat_tab_E1_t3)] = 0

tema3 = paste0(" Ex1 - ", stat_tab_E1_t3$Ex1, "; Ex2 - ", stat_tab_E1_t3$Ex2, 
       "; Ex3 - ", stat_tab_E1_t3$Ex3, "; Ex4 - ", stat_tab_E1_t3$Ex4,
       "; Ex5 - ", stat_tab_E1_t3$Ex5, "; Ex6 - ", stat_tab_E1_t3$Ex6,
       "; Ex7 - ", stat_tab_E1_t3$Ex7)

# tema 4
stat_tab_E1_t4 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_restanta_Mai.xlsx", 
                                 sheet = 5)

stat_tab_E1_t4[is.na(stat_tab_E1_t4)] = 0

tema4 = paste0(" Ex1 - ", stat_tab_E1_t4$Ex1, "; Ex2 - ", stat_tab_E1_t4$Ex2, 
       "; Ex3 - ", stat_tab_E1_t4$Ex3, "; Ex4 - ", stat_tab_E1_t4$Ex4,
       "; Ex5 - ", stat_tab_E1_t4$Ex5, "; Ex6 - ", stat_tab_E1_t4$Ex6)

# tema 5
stat_tab_E1_t5 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_restanta_Mai.xlsx", 
                                 sheet = 6)

stat_tab_E1_t5[is.na(stat_tab_E1_t5)] = 0

tema5 = paste0(" Ex1 - ", stat_tab_E1_t5$Ex1, "; Ex2 - ", stat_tab_E1_t5$Ex2, 
       "; Ex3 - ", stat_tab_E1_t5$Ex3, "; Ex4 - ", stat_tab_E1_t5$Ex4,
       "; Ex5 - ", stat_tab_E1_t5$Ex5, "; Ex6 - ", stat_tab_E1_t5$Ex6)

# examen
stat_tab_E1_ex = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_restanta_Mai.xlsx", 
                                 sheet = 7)

stat_tab_E1_ex[is.na(stat_tab_E1_ex)] = 0

examen = paste0(" Ex1 - ", stat_tab_E1_ex$Ex1, "; Ex2 - ", stat_tab_E1_ex$Ex2, 
       "; Ex3 - ", stat_tab_E1_ex$Ex3, "; Ex4 - ", stat_tab_E1_ex$Ex4)

# 
stat_tab_E1$Tema_1_label = tema1
stat_tab_E1$Tema_2_label = tema2
stat_tab_E1$Tema_3_label = tema3
stat_tab_E1$Tema_4_label = tema4
stat_tab_E1$Tema_5_label = tema5

stat_tab_E1$ex_label = examen

# fix some left 2 columns and right 1 column

DT::datatable(
  cbind(' ' = '', stat_tab_E1), 
  escape = -2,
  class = 'cell-border stripe',
  # style = 'bootstrap',
  extensions = c('FixedColumns', 'Buttons', 'Scroller'),
  options = list(
    columnDefs = list(list(className = 'dt-center', targets = 3:11),
                      list(visible = FALSE, targets = c(0, 12:17)),
                      list(orderable = FALSE, className = 'details-control', targets = 1)),
    dom = c('Bfrtip'),
    scrollX = TRUE,
    # fixedColumns = list(leftColumns = 1, rightColumns = 6),
    buttons = c('csv', 'excel', 'pdf', 'print'),
    initComplete = JS(
    "function(settings, json) {",
    "$(this.api().table().header()).css({'background-color': '#2f7acd', 'color': '#fff'});",
    "}"),
    deferRender = TRUE
  ),
  callback = JS("
  table.column(1).nodes().to$().css({cursor: 'pointer'});
  var format = function(d) {
    return '<div style=\"background-color:#fafafa; padding: .5em; font-size: 0.85em;\"> ' +
            '<u><em style = \"font-size: 1.25em;\">Detalii notare</em></u>: <br> ' + 
           '<strong>Tema 1</strong>:' + d[12] + '<br> ' + 
           '<strong>Tema 2</strong>:' + d[13] + '<br> ' + 
           '<strong>Tema 3</strong>:' + d[14] + '<br> ' + 
           '<strong>Tema 4</strong>:' + d[15] + '<br> ' + 
           '<strong>Tema 5</strong>:' + d[16] + '<br> ' + 
           '<strong>Examen Restanta</strong>:' + d[17] + '</div>';
  };
  table.on('click', 'td.details-control', function() {
    var tr = $(this).closest('tr');
        var row = table.row( tr );
 
        if ( row.child.isShown() ) {
            // This row is already open - close it
            row.child.hide();
            tr.removeClass('shown');
        }
        else {
            // Open this row
            row.child( format(row.data()) ).show();
            tr.addClass('shown');
        }
  });"
  )
)%>% formatStyle('Total', 
                 # backgroundColor = styleInterval(4.9, c('#f78080', '#60cbf2')),
                 backgroundColor = styleEqual(c("Absent", "3", "4", "5", "6", "7", "8", "9", "10"), 
                                              c('#ffff99', '#f78080', '#f78080', '#9ddcff', '#9ddcff', '#9ddcff', '#9ddcff', '#9ddcff', '#9ddcff')),
                 fontWeight = 'bold') %>%
  formatStyle('Total', 
              target = 'row',
                 backgroundColor = styleEqual(c("3", "4", "Absent"), c('#f78080', '#f78080', '#ffff99'))) %>%
  formatStyle(columns = c(3:10), fontSize = '75%')
```

## Rezultate Sesiunea Februarie 2019
***

```{r, echo= FALSE, eval=FALSE}
stat_tab_R1 = read.csv("results/Tabel_Statistica_2018_2019.csv", stringsAsFactors = FALSE)
# stat_tab_R1$Total = round(stat_tab_R1$Total, 2)

stat_tab_R1 = stat_tab_R1[,1:10]
stat_tab_R1$Total[stat_tab_R1$Examen == 0] = "Absent"

# stat_tab_R1 = stat_tab_R1[,-1]
# create 19 breaks and 20 rgb color values ranging from white to red
# brks <- quantile(as.numeric(stat_tab$Total), probs = seq(.05, .95, .05), na.rm = TRUE)
# clrs <- round(seq(255, 40, length.out = length(brks) + 1), 0) %>%
# {paste0("rgb(255,", ., ",", ., ")")}

# fix some left 2 columns and right 1 column
datatable(
  stat_tab_R1, class = 'cell-border stripe',
  # style = 'bootstrap',
  extensions = c('FixedColumns', 'Buttons', 'Scroller'),
  options = list(
    columnDefs = list(list(className = 'dt-center', targets = 2:5)),
    dom = c('Bfrtip'),
    scrollX = TRUE,
    fixedColumns = list(leftColumns = 2, rightColumns = 1),
    buttons = c('csv', 'excel', 'pdf', 'print'),
    initComplete = JS(
    "function(settings, json) {",
    "$(this.api().table().header()).css({'background-color': '#2f7acd', 'color': '#fff'});",
    "}"),
    deferRender = TRUE
  )
)%>% formatStyle('Total', 
                 # backgroundColor = styleInterval(4.9, c('#f78080', '#60cbf2')),
                 backgroundColor = styleEqual(c("Absent", "3", "4", "5", "6", "7", "8", "9", "10"), 
                                              c('#ffff99', '#f78080', '#f78080', '#9ddcff', '#9ddcff', '#9ddcff', '#9ddcff', '#9ddcff', '#9ddcff')),
                 fontWeight = 'bold') %>%
  formatStyle('Total', 
              target = 'row',
                 backgroundColor = styleEqual(c("3", "4", "Absent"), c('#f78080', '#f78080', '#ffff99')))
```


```{r, echo= FALSE, message=FALSE, warning=FALSE}
library(readxl)
stat_tab_E1 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_v3.xlsx")

stat_tab_E1 = stat_tab_E1[,1:10]
stat_tab_E1$Total[stat_tab_E1$Examen == 0] = "Absent"

# tema 1
stat_tab_E1_t1 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_v3.xlsx", 
                                 sheet = 2)

stat_tab_E1_t1[is.na(stat_tab_E1_t1)] = 0

tema1 = paste0(" Ex1 - ", stat_tab_E1_t1$Ex1, "; Ex2 - ", stat_tab_E1_t1$Ex2, 
       "; Ex3 - ", stat_tab_E1_t1$Ex3, "; Ex4 - ", stat_tab_E1_t1$Ex4,
       "; Ex5 - ", stat_tab_E1_t1$Ex5, "; Ex6 - ", stat_tab_E1_t1$Ex6,
       "; Ex7 - ", stat_tab_E1_t1$Ex7, "; Ex8 - ", stat_tab_E1_t1$Ex8,
       "; Ex9 - ", stat_tab_E1_t1$Ex9)

# tema 2
stat_tab_E1_t2 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_v3.xlsx", 
                                 sheet = 3)

stat_tab_E1_t2[is.na(stat_tab_E1_t2)] = 0

tema2 = paste0(" Ex1 - ", stat_tab_E1_t2$Ex1, "; Ex2 - ", stat_tab_E1_t2$Ex2, 
       "; Ex3 - ", stat_tab_E1_t2$Ex3, "; Ex4 - ", stat_tab_E1_t2$Ex4,
       "; Ex5 - ", stat_tab_E1_t2$Ex5, "; Ex6 - ", stat_tab_E1_t2$Ex6)

# tema 3
stat_tab_E1_t3 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_v3.xlsx", 
                                 sheet = 4)

stat_tab_E1_t3[is.na(stat_tab_E1_t3)] = 0

tema3 = paste0(" Ex1 - ", stat_tab_E1_t3$Ex1, "; Ex2 - ", stat_tab_E1_t3$Ex2, 
       "; Ex3 - ", stat_tab_E1_t3$Ex3, "; Ex4 - ", stat_tab_E1_t3$Ex4,
       "; Ex5 - ", stat_tab_E1_t3$Ex5, "; Ex6 - ", stat_tab_E1_t3$Ex6,
       "; Ex7 - ", stat_tab_E1_t3$Ex7)

# tema 4
stat_tab_E1_t4 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_v3.xlsx", 
                                 sheet = 5)

stat_tab_E1_t4[is.na(stat_tab_E1_t4)] = 0

tema4 = paste0(" Ex1 - ", stat_tab_E1_t4$Ex1, "; Ex2 - ", stat_tab_E1_t4$Ex2, 
       "; Ex3 - ", stat_tab_E1_t4$Ex3, "; Ex4 - ", stat_tab_E1_t4$Ex4,
       "; Ex5 - ", stat_tab_E1_t4$Ex5, "; Ex6 - ", stat_tab_E1_t4$Ex6)

# tema 5
stat_tab_E1_t5 = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_v3.xlsx", 
                                 sheet = 6)

stat_tab_E1_t5[is.na(stat_tab_E1_t5)] = 0

tema5 = paste0(" Ex1 - ", stat_tab_E1_t5$Ex1, "; Ex2 - ", stat_tab_E1_t5$Ex2, 
       "; Ex3 - ", stat_tab_E1_t5$Ex3, "; Ex4 - ", stat_tab_E1_t5$Ex4,
       "; Ex5 - ", stat_tab_E1_t5$Ex5, "; Ex6 - ", stat_tab_E1_t5$Ex6)

# examen
stat_tab_E1_ex = readxl::read_xlsx("results/Tabel_Statistica_2018_2019_v3.xlsx", 
                                 sheet = 7)

stat_tab_E1_ex[is.na(stat_tab_E1_ex)] = 0

examen = paste0(" Ex1 - ", stat_tab_E1_ex$Ex1, "; Ex2 - ", stat_tab_E1_ex$Ex2, 
       "; Ex3 - ", stat_tab_E1_ex$Ex3, "; Ex4 - ", stat_tab_E1_ex$Ex4)

# 
stat_tab_E1$Tema_1_label = tema1
stat_tab_E1$Tema_2_label = tema2
stat_tab_E1$Tema_3_label = tema3
stat_tab_E1$Tema_4_label = tema4
stat_tab_E1$Tema_5_label = tema5

stat_tab_E1$ex_label = examen

# fix some left 2 columns and right 1 column

DT::datatable(
  cbind(' ' = '', stat_tab_E1), 
  escape = -2,
  class = 'cell-border stripe',
  # style = 'bootstrap',
  extensions = c('FixedColumns', 'Buttons', 'Scroller'),
  options = list(
    columnDefs = list(list(className = 'dt-center', targets = 3:11),
                      list(visible = FALSE, targets = c(0, 12:17)),
                      list(orderable = FALSE, className = 'details-control', targets = 1)),
    dom = c('Bfrtip'),
    scrollX = TRUE,
    # fixedColumns = list(leftColumns = 1, rightColumns = 6),
    buttons = c('csv', 'excel', 'pdf', 'print'),
    initComplete = JS(
    "function(settings, json) {",
    "$(this.api().table().header()).css({'background-color': '#2f7acd', 'color': '#fff'});",
    "}"),
    deferRender = TRUE
  ),
  callback = JS("
  table.column(1).nodes().to$().css({cursor: 'pointer'});
  var format = function(d) {
    return '<div style=\"background-color:#fafafa; padding: .5em; font-size: 0.85em;\"> ' +
            '<u><em style = \"font-size: 1.25em;\">Detalii notare</em></u>: <br> ' + 
           '<strong>Tema 1</strong>:' + d[12] + '<br> ' + 
           '<strong>Tema 2</strong>:' + d[13] + '<br> ' + 
           '<strong>Tema 3</strong>:' + d[14] + '<br> ' + 
           '<strong>Tema 4</strong>:' + d[15] + '<br> ' + 
           '<strong>Tema 5</strong>:' + d[16] + '<br> ' + 
           '<strong>Examen</strong>:' + d[17] + '</div>';
  };
  table.on('click', 'td.details-control', function() {
    var tr = $(this).closest('tr');
        var row = table.row( tr );
 
        if ( row.child.isShown() ) {
            // This row is already open - close it
            row.child.hide();
            tr.removeClass('shown');
        }
        else {
            // Open this row
            row.child( format(row.data()) ).show();
            tr.addClass('shown');
        }
  });"
  )
)%>% formatStyle('Total', 
                 # backgroundColor = styleInterval(4.9, c('#f78080', '#60cbf2')),
                 backgroundColor = styleEqual(c("Absent", "3", "4", "5", "6", "7", "8", "9", "10"), 
                                              c('#ffff99', '#f78080', '#f78080', '#9ddcff', '#9ddcff', '#9ddcff', '#9ddcff', '#9ddcff', '#9ddcff')),
                 fontWeight = 'bold') %>%
  formatStyle('Total', 
              target = 'row',
                 backgroundColor = styleEqual(c("3", "4", "Absent"), c('#f78080', '#f78080', '#ffff99'))) %>%
  formatStyle(columns = c(3:10), fontSize = '75%')
```


```{r, echo=FALSE, fig.align="center", warning=FALSE}
library(tidyverse)
# library(plotly)

# Grupa 301
gr301 = stat_tab_E1[stat_tab_E1$Grupa == 301,]

# Grupa 311
gr311 = stat_tab_E1[stat_tab_E1$Grupa == 311,]

# Grupa 321
gr321 = stat_tab_E1[stat_tab_E1$Grupa == 321,]

# library(plotly)

pstat_tab_p = stat_tab_E1[stat_tab_E1$Total != "Absent", ]
pstat_tab_p = pstat_tab_p %>% mutate(ID = ifelse(Total == "4", TRUE, FALSE),
                                     Grupa2 = paste0("Grupa ", Grupa))

pl1 = ggplot(pstat_tab_p, aes(x = as.numeric(Total), fill = ID)) +
    geom_bar() +
    # coord_flip() +
    # ylim(c(0,10))+
    scale_fill_manual(values = c("dodgerblue", "grey80")) +
    geom_text(stat='count', aes(label=..count.., colour = ID), 
              vjust=-1, size = 3)+ 
    scale_colour_manual(values = c("black", "brown3"))+
    scale_x_continuous(breaks = 4:10,
                     labels = 4:10)+
    guides(fill = FALSE, colour = FALSE) +
    facet_wrap(~Grupa2)+
    theme_minimal()+
    labs(x = "Nota finala", y = "Numar studenti")+
    theme(strip.text = element_text(size = 12, face = "bold"),
          axis.text.y = element_blank(),
          axis.ticks.y = element_blank())

pl1
# ggplotly(pl1)
```


> **Grupa 301**: dintr-un total de `r length(gr301$Total)` stundeți înscriși, `r sum(gr301$Examen == 0)` au fost absenți la examen, prin urmare promovabilitatea celor prezenți la examen a fost în procent de `r paste0(format(sum(gr301$Total[gr301$Examen != 0] != "4")/(length(gr301$Total)-sum(gr301$Examen == 0))*100, digits = 2), "%")`.

> **Grupa 311**: dintr-un total de `r length(gr311$Total)` stundeți înscriși, `r sum(gr311$Examen == 0)` au fost absenți la examen, prin urmare promovabilitatea celor prezenți la examen a fost în procent de `r paste0(format(sum(gr311$Total[gr311$Examen != 0] != "4")/(length(gr311$Total)-sum(gr311$Examen == 0))*100, digits = 2), "%")`.

> **Grupa 321**: dintr-un total de `r length(gr321$Total)` stundeți înscriși, `r sum(gr321$Examen == 0)` au fost absenți la examen, prin urmare promovabilitatea celor prezenți la examen a fost în procent de `r paste0(format(sum(gr321$Total[gr321$Examen != 0] != "4")/(length(gr321$Total)-sum(gr321$Examen == 0))*100, digits = 2), "%")`.


## Bibliografie
***

  1. Monica Dumitrescu, Anton Batatorescu - *Applied statistics using the R system*, Ed. Univ. Buc., 2006
  2. Virgil Craiu - *Statistică Matematică*, Ed. Univ. Buc., 1997
  3. George Casella, Roger Berger - *Statistical Inference*, Duxbury, 2002
  4. George Roussas - *A Course in Mathematical Statistics*, Academic Press, 1997
  5. Geoffrey Grimmett, David Stirzaker - *Probability and Random Processes*, Oxford University Press, 2001
  6. John Rice - *Mathematical Statistics and Data Analysis*, Duxbury, 2006
  

## Link-uri utile
***

### R
  1. Programul R - [CRAN](https://cran.r-project.org/)
  2. Interfața grafică [RStudio](https://www.rstudio.com/)
  3. Documentație R (în engleză) - [R-Intro](https://cran.r-project.org/doc/manuals/r-release/R-intro.pdf)
  4. Documentație R (în română) - [R pentru începători ](ftp://cran.r-project.org/pub/R/doc/contrib/Paradis-rdebuts_RO.pdf)
  5. Documentație R (în română) - [Inițiere în R pentru persoane cu pregătire matematică ](http://www.edumanager.ro/community/documente/initiere_in_r.pdf)
  
### Latex
  1. Introducere în Latex (în romană) - [Manual Wikibooks](https://ro.wikibooks.org/wiki/LaTeX_(carte))
  2. Introducere în Latex (în engleză) - [Wikibooks Latex Manual](https://en.wikibooks.org/wiki/LaTeX) în special secțiunile de [matematică](https://en.wikibooks.org/wiki/LaTeX/Mathematics), [liste](https://en.wikibooks.org/wiki/LaTeX/List_Structures), [grafice](https://en.wikibooks.org/wiki/LaTeX/Importing_Graphics) și [figuri](https://en.wikibooks.org/wiki/LaTeX/Floats,_Figures_and_Captions)
  3. Tutoriale Latex (în engleză) - [video](https://www.youtube.com/playlist?list=PLDD406480D35CE390)
  4. Editoarele: [Texmaker](http://www.xm1math.net/texmaker/download.html) și [TeXnicCenter](http://www.texniccenter.org/) 
  5. Mediul latex [MiKTeX](https://miktex.org/)

### Rmarkdown
  1. Pachetul [Rmarkdown](http://rmarkdown.rstudio.com/index.html) pentru documente reproductibile
